import{u as V,a as A,n as W,v as _,b as B,c as G,m as J,l as N,d as T,y as X,h as Y,e as Z,f as ee,L as te,H as ae,g as se,r as w}from"./app-c04dce62.js";import{c as le,u as ue,r as m,ab as re,h as b,z as E,o as ne,I as oe,j as t,a5 as x,K as ce,i as ve}from"./framework-8980b429.js";const ie="search-pro-result-history",o=V(ie,[]),pe=()=>{const{resultHistoryCount:u}=w,c=u>0;return{enabled:c,resultHistory:o,addResultHistory:l=>{c&&(o.value.length<u?o.value=[l,...o.value]:o.value=[l,...o.value.slice(0,u-1)])},removeResultHistory:l=>{o.value=[...o.value.slice(0,l),...o.value.slice(l+1)]}}},he=u=>{const c=A(),l=m(!1),h=m([]);let v;const i=se(d=>{l.value=!0,v==null||v.terminate(),d?(v=new Worker(`/vuepress-python-notes/${w.worker}`,{}),v.addEventListener("message",({data:f})=>{h.value=f,l.value=!1}),v.postMessage({query:d,routeLocale:c.value})):(h.value=[],l.value=!1)},w.delay);return E([u,c],()=>i(u.value),{immediate:!0}),{searching:l,results:h}};var me=le({name:"SearchResult",props:{query:{type:String,required:!0}},emits:["close","updateQuery"],setup(u,{emit:c}){const l=ee(),h=ue(),v=A(),i=W(_),{addQueryHistory:d}=te(),{enabled:f,resultHistory:L,addResultHistory:q,removeResultHistory:I}=pe(),S=m(),C=B(S),$=re(u,"query"),{results:y,searching:M}=he($),r=m(0),s=m(0),D=b(()=>L.value.length>0),R=b(()=>y.value.length>0),k=b(()=>y.value[r.value]||null),F=()=>{r.value=r.value>0?r.value-1:y.value.length-1,s.value=k.value.contents.length-1},U=()=>{r.value=r.value<y.value.length-1?r.value+1:0,s.value=0},z=()=>{s.value<k.value.contents.length-1?s.value=s.value+1:U()},K=()=>{s.value>0?s.value=s.value-1:F()},P=e=>e.map(a=>ve(a)?a:t(a[0],a[1])),Q=e=>{if(e.type==="custom"){const a=ae[e.index]||"$content",[p,g=""]=ce(a)?a[v.value].split("$content"):a.split("$content");return P([p,...e.display,g])}return P(e.display)},H=()=>{r.value=0,s.value=0,c("updateQuery",""),c("close")};return G("keydown",e=>{if(R.value){if(e.key==="ArrowUp")K();else if(e.key==="ArrowDown")z();else if(e.key==="Enter"){const a=k.value.contents[s.value];l.value.path!==a.path&&(d(u.query),q(a),h.push(a.path),H())}}}),E([r,s],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),ne(()=>{S.value=document.body,C.value=!0}),oe(()=>{C.value=!1}),()=>t("div",{class:["search-pro-result",{empty:$.value?!R.value:!D.value}],id:"search-pro-results"},$.value===""?D.value?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},i.value.history),L.value.map((e,a)=>t(x,{to:e.path,class:["search-pro-result-item",{active:s.value===a}],onClick:()=>{H()}},()=>[t(J,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[e.type==="content"&&e.header?t("div",{class:"content-header"},e.header):null,t("div",Q(e))]),t("button",{class:"search-pro-close-icon",onClick:p=>{p.preventDefault(),p.stopPropagation(),I(a)}},t(N))]))])):f?i.value.emptyHistory:i.value.emptyResult:M.value?t(T,{hint:i.value.searching}):R.value?t("ul",{class:"search-pro-result-list"},y.value.map(({title:e,contents:a},p)=>{const g=r.value===p;return t("li",{class:["search-pro-result-list-item",{active:g}]},[t("div",{class:"search-pro-result-title"},e||"Documentation"),a.map((n,O)=>{const j=g&&s.value===O;return t(x,{to:n.path,class:["search-pro-result-item",{active:j,"aria-selected":j}],onClick:()=>{d(u.query),q(n),H()}},()=>[n.type==="content"?null:t(n.type==="title"?X:n.type==="heading"?Y:Z,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[n.type==="content"&&n.header?t("div",{class:"content-header"},n.header):null,t("div",Q(n))])])})])})):i.value.emptyResult)}});export{me as default};

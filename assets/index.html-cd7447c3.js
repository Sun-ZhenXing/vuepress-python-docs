import{_ as l,r as e,o as p,c as o,b as s,a as c,w as i,d as n,e as D}from"./app-e398544c.js";const r={},t=s("h1",{id:"_9-使用-pyside6-构建高级应用",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_9-使用-pyside6-构建高级应用","aria-hidden":"true"},"#"),n(" 9. 使用 PySide6 构建高级应用")],-1),d={class:"table-of-contents"},y=D(`<h2 id="_9-1-使用-opencv" tabindex="-1"><a class="header-anchor" href="#_9-1-使用-opencv" aria-hidden="true">#</a> 9.1 使用 OpenCV</h2><p>如果没有安装 OpenCV，可以使用下面的命令安装：</p><div class="language-bash" data-ext="sh"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;">pip</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">install</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">opencv-python</span></span>
<span class="line"></span></code></pre></div><p>下面我们来看一个使用 OpenCV 的例子，使用 OpenCV 读取摄像头的图像，并显示在窗口中。</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> sys</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> cv2</span></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> numpy </span><span style="color:#C586C0;">as</span><span style="color:#D4D4D4;"> np</span></span>
<span class="line"><span style="color:#C586C0;">from</span><span style="color:#D4D4D4;"> PySide6.QtCore </span><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> QTimer</span></span>
<span class="line"><span style="color:#C586C0;">from</span><span style="color:#D4D4D4;"> PySide6.QtGui </span><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> QImage, QPixmap</span></span>
<span class="line"><span style="color:#C586C0;">from</span><span style="color:#D4D4D4;"> PySide6.QtWidgets </span><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> QApplication, QLabel, QVBoxLayout, QWidget</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">MainWindow</span><span style="color:#D4D4D4;">(</span><span style="color:#4EC9B0;">QWidget</span><span style="color:#D4D4D4;">):</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">def</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">__init__</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">self</span><span style="color:#D4D4D4;">) -&gt; </span><span style="color:#569CD6;">None</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#4EC9B0;">super</span><span style="color:#D4D4D4;">().</span><span style="color:#DCDCAA;">__init__</span><span style="color:#D4D4D4;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#6A9955;"># 使用 OpenCV 初始化摄像头</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">self</span><span style="color:#D4D4D4;">._video = cv2.VideoCapture(</span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#6A9955;"># 初始化定时器</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">self</span><span style="color:#D4D4D4;">.timer = QTimer()</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">self</span><span style="color:#D4D4D4;">.timer.timeout.connect(</span><span style="color:#569CD6;">self</span><span style="color:#D4D4D4;">.update_frame)</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">self</span><span style="color:#D4D4D4;">.timer.start(</span><span style="color:#B5CEA8;">30</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#6A9955;"># 初始化 UI</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">self</span><span style="color:#D4D4D4;">._image_label = QLabel()</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">self</span><span style="color:#D4D4D4;">._image_label.setStyleSheet(</span><span style="color:#CE9178;">&quot;background-color: #000&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">self</span><span style="color:#D4D4D4;">._layout = QVBoxLayout()</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">self</span><span style="color:#D4D4D4;">._layout.addWidget(</span><span style="color:#569CD6;">self</span><span style="color:#D4D4D4;">._image_label)</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">self</span><span style="color:#D4D4D4;">.setLayout(</span><span style="color:#569CD6;">self</span><span style="color:#D4D4D4;">._layout)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">def</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">dispaly_frame</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">self</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">frame</span><span style="color:#D4D4D4;">: np.ndarray):</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#6A9955;">&quot;&quot;&quot;渲染帧&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">        image = QImage(</span></span>
<span class="line"><span style="color:#D4D4D4;">            frame,</span></span>
<span class="line"><span style="color:#D4D4D4;">            frame.shape[</span><span style="color:#B5CEA8;">1</span><span style="color:#D4D4D4;">],</span></span>
<span class="line"><span style="color:#D4D4D4;">            frame.shape[</span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">],</span></span>
<span class="line"><span style="color:#D4D4D4;">            frame.strides[</span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">],</span></span>
<span class="line"><span style="color:#D4D4D4;">            QImage.Format_BGR888,</span></span>
<span class="line"><span style="color:#D4D4D4;">        )</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">self</span><span style="color:#D4D4D4;">._image_label.setPixmap(QPixmap.fromImage(image))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">def</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">update_frame</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">self</span><span style="color:#D4D4D4;">):</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#6A9955;">&quot;&quot;&quot;更新帧&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">        ret, frame = </span><span style="color:#569CD6;">self</span><span style="color:#D4D4D4;">._video.read()</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> ret:</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#569CD6;">self</span><span style="color:#D4D4D4;">.dispaly_frame(frame)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">__name__</span><span style="color:#D4D4D4;"> == </span><span style="color:#CE9178;">&quot;__main__&quot;</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">    app = QApplication(sys.argv)</span></span>
<span class="line"><span style="color:#D4D4D4;">    window = MainWindow()</span></span>
<span class="line"><span style="color:#D4D4D4;">    window.show()</span></span>
<span class="line"><span style="color:#D4D4D4;">    sys.exit(app.exec())</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,5);function v(m,u){const a=e("router-link");return p(),o("div",null,[t,s("nav",d,[s("ul",null,[s("li",null,[c(a,{to:"#_9-1-使用-opencv"},{default:i(()=>[n("9.1 使用 OpenCV")]),_:1})])])]),y])}const b=l(r,[["render",v],["__file","index.html.vue"]]);export{b as default};
